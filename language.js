// Language Translations
const translations = {
    en: {
        nav: {
            home: 'HOME',
            events: 'EVENTS',
            howToJoin: 'HOW TO JOIN',
            leaderboard: 'LEADERBOARD'
        },
        home: {
            title: 'WARNAMENT LEADERBOARD',
            subtitle: 'Join events',
            viewEvents: 'VIEW EVENTS',
            leaderboard: 'LEADERBOARD',
            competitiveEvents: 'Fun & Friendly Events',
            competitiveEventsDesc: 'Participate in regular events to test your skills against other players.',
            rankings: 'Rankings',
            rankingsDesc: 'Climb the leaderboard and establish yourself as one of the top strategic commanders.',
            strategicWarfare: 'Strategic Warfare',
            strategicWarfareDesc: 'Master the art of conquest in deep grand strategy battles that take only minutes to start.',
            readyTitle: 'Ready to Join the Battle?',
            readyDesc: 'Check out our upcoming events and register now',
            browseEvents: 'BROWSE EVENTS'
        },
        events: {
            title: 'UPCOMING EVENTS',
            subtitle: 'Join events and prove your skills',
            activeUpcoming: 'Active & Upcoming Events',
            noEvents: 'NO EVENTS AVAILABLE',
            noEventsDesc: 'Check back soon for upcoming events',
            details: 'DETAILS',
            enter: 'ENTER',
            live: 'LIVE',
            upcoming: 'UPCOMING',
            enterEvent: 'Enter Event',
            discordUsername: 'Discord Username',
            register: 'REGISTER'
        },
        leaderboard: {
            title: 'GLOBAL LEADERBOARD',
            subtitle: 'Top commanders ranked by event performance',
            allTime: 'ALL TIME',
            thisMonth: 'THIS MONTH',
            thisWeek: 'THIS WEEK',
            rank: 'RANK',
            player: 'PLAYER',
            wins: 'WINS',
            points: 'POINTS'
        },
        howToJoin: {
            title: 'HOW TO JOIN AN EVENT',
            subtitle: 'Complete guide to registering and participating in events',
            step1Title: 'Browse Available Events',
            step1Desc: 'Start by visiting the Events page to see all currently active and upcoming events. Each event card displays important information including the event name, current status (Live or Upcoming), and a brief description.',
            step2Title: 'View Event Details',
            step2Desc: 'Click the "DETAILS" button on any event card to view comprehensive information about that event. This includes the event rules, start time, expected duration, participant count, and any specific requirements for joining.',
            step3Title: 'Register for the Event',
            step3Desc: 'Click the "ENTER" button on the event card or in the event details modal. A registration form will appear asking for your Discord username. Enter your Discord username accurately as this is how we\'ll identify you during the event.',
            step4Title: 'Confirm Your Registration',
            step4Desc: 'After entering your Discord username, click the "REGISTER" button to confirm your participation. You\'ll receive a confirmation message indicating that you\'ve been successfully registered for the event.',
            step5Title: 'Prepare and Participate',
            step5Desc: 'Once registered, prepare your strategy and join the event at the scheduled time. Make sure you have the necessary game installed and ready. Event coordinators will send additional instructions through Discord when the event is about to begin.',
            step6Title: 'Check Your Results',
            step6Desc: 'After the event concludes, your performance will be recorded in the leaderboard. Visit the Leaderboard page to see your final ranking, points, and how you compare against other participants. Your achievement will be reflected in your player profile.',
            requirementsTitle: 'Requirements',
            req1: 'Discord account with a valid username',
            req2: 'Game client installed on your device',
            req3: 'Stable internet connection during the event',
            req4: 'Reading and accepting event rules before registration',
            tipsTitle: 'Pro Tips',
            tip1Title: 'Register Early',
            tip1Desc: 'Register for events as soon as they\'re announced to secure your spot. Some events may have limited participant slots.',
            tip2Title: 'Read the Rules',
            tip2Desc: 'Carefully review all event rules and requirements to avoid any surprises during participation.',
            tip3Title: 'Join Discord',
            tip3Desc: 'Make sure you\'re a member of our Discord server to receive real-time event updates and announcements.',
            tip4Title: 'Practice First',
            tip4Desc: 'If you\'re new to competitive events, practice your strategy before joining to maximize your performance.',
            ctaTitle: 'Ready to Compete?',
            ctaDesc: 'Browse our upcoming events and join the community of competitive players.',
            viewEvents: 'VIEW EVENTS'
        },
        footer: {
            copyright: '© 2024 Warnament Leaderboard. All rights reserved.'
        }
    },
    ru: {
        nav: {
            home: 'ГЛАВНАЯ',
            events: 'СОБЫТИЯ',
            howToJoin: 'КАК ПРИСОЕДИНИТЬСЯ',
            leaderboard: 'ТАБЛИЦА ЛИДЕРОВ'
        },
        home: {
            title: 'ТАБЛИЦА ЛИДЕРОВ WARNAMENT',
            subtitle: 'Присоединяйтесь к событиям и докажите своё стратегическое мастерство',
            viewEvents: 'ПОСМОТРЕТЬ СОБЫТИЯ',
            leaderboard: 'ТАБЛИЦА ЛИДЕРОВ',
            competitiveEvents: 'Весёлые и Дружеские События',
            competitiveEventsDesc: 'Участвуйте в регулярных событиях, чтобы проверить свои навыки против других игроков.',
            rankings: 'Рейтинги',
            rankingsDesc: 'Поднимайтесь по таблице лидеров и станьте одним из лучших стратегических командиров.',
            strategicWarfare: 'Стратегическая Война',
            strategicWarfareDesc: 'Освойте искусство завоевания в глубоких стратегических сражениях, которые начинаются за считанные минуты.',
            readyTitle: 'Готовы присоединиться к битве?',
            readyDesc: 'Ознакомьтесь с предстоящими событиями и зарегистрируйтесь сейчас',
            browseEvents: 'ПРОСМОТРЕТЬ СОБЫТИЯ'
        },
        events: {
            title: 'ПРЕДСТОЯЩИЕ СОБЫТИЯ',
            subtitle: 'Присоединяйтесь к событиям и покажите свои навыки',
            activeUpcoming: 'Активные и Предстоящие События',
            noEvents: 'НЕТ ДОСТУПНЫХ СОБЫТИЙ',
            noEventsDesc: 'Вернитесь позже для предстоящих событий',
            details: 'ПОДРОБНЕЕ',
            enter: 'ВОЙТИ',
            live: 'В ЭФИРЕ',
            upcoming: 'СКОРО',
            enterEvent: 'Войти в Событие',
            discordUsername: 'Имя пользователя Discord',
            register: 'ЗАРЕГИСТРИРОВАТЬСЯ'
        },
        leaderboard: {
            title: 'ГЛОБАЛЬНАЯ ТАБЛИЦА ЛИДЕРОВ',
            subtitle: 'Лучшие командиры по результатам событий',
            allTime: 'ВСЁ ВРЕМЯ',
            thisMonth: 'ЭТОТ МЕСЯЦ',
            thisWeek: 'ЭТА НЕДЕЛЯ',
            rank: 'РАНГ',
            player: 'ИГРОК',
            wins: 'ПОБЕДЫ',
            points: 'ОЧКИ'
        },
        howToJoin: {
            title: 'КАК ПРИСОЕДИНИТЬСЯ К СОБЫТИЮ',
            subtitle: 'Полное руководство по регистрации и участию в событиях',
            step1Title: 'Просмотрите доступные события',
            step1Desc: 'Начните с посещения страницы Событий, чтобы увидеть все активные и предстоящие события. На каждой карточке события отображается важная информация, включая название события, текущий статус (В прямом эфире или Скоро) и краткое описание.',
            step2Title: 'Просмотрите детали события',
            step2Desc: 'Нажмите кнопку "ПОДРОБНЕЕ" на любой карточке события, чтобы просмотреть полную информацию о событии. Это включает правила события, время начала, ожидаемую продолжительность, количество участников и любые особые требования для присоединения.',
            step3Title: 'Зарегистрируйтесь на событие',
            step3Desc: 'Нажмите кнопку "ВОЙТИ" на карточке события или в модальном окне с деталями события. Появится форма регистрации, запрашивающая ваше имя пользователя Discord. Введите ваше имя пользователя Discord точно, так как это то, как мы вас идентифицируем во время события.',
            step4Title: 'Подтвердите свою регистрацию',
            step4Desc: 'После ввода имени пользователя Discord нажмите кнопку "ЗАРЕГИСТРИРОВАТЬСЯ", чтобы подтвердить участие. Вы получите сообщение подтверждения о том, что вы успешно зарегистрированы на событие.',
            step5Title: 'Подготовьтесь и участвуйте',
            step5Desc: 'После регистрации подготовьте свою стратегию и присоединитесь к событию в запланированное время. Убедитесь, что у вас установлена необходимая игра и она готова к запуску. Координаторы события отправят дополнительные инструкции через Discord, когда событие вот-вот начнется.',
            step6Title: 'Проверьте ваши результаты',
            step6Desc: 'После завершения события ваш результат будет записан в таблицу лидеров. Посетите страницу Таблица лидеров, чтобы увидеть ваш окончательный рейтинг, очки и то, как вы сравниваетесь с другими участниками. Ваше достижение будет отражено в вашем профиле игрока.',
            requirementsTitle: 'Требования',
            req1: 'Аккаунт Discord с действительным именем пользователя',
            req2: 'Клиент игры установлен на вашем устройстве',
            req3: 'Стабильное интернет-соединение во время события',
            req4: 'Прочтение и принятие правил события перед регистрацией',
            tipsTitle: 'Советы профессионалов',
            tip1Title: 'Регистрируйтесь заранее',
            tip1Desc: 'Зарегистрируйтесь на события сразу же после их объявления, чтобы обеспечить себе место. Некоторые события могут иметь ограниченное количество участников.',
            tip2Title: 'Прочитайте правила',
            tip2Desc: 'Внимательно ознакомьтесь со всеми правилами события и требованиями, чтобы избежать неожиданностей во время участия.',
            tip3Title: 'Присоединитесь к Discord',
            tip3Desc: 'Убедитесь, что вы являетесь членом нашего сервера Discord, чтобы получать обновления и объявления событий в реальном времени.',
            tip4Title: 'Тренируйтесь сначала',
            tip4Desc: 'Если вы новичок в соревновательных событиях, потренируйтесь в своей стратегии перед участием, чтобы максимизировать вашу производительность.',
            ctaTitle: 'Готовы к соревнованиям?',
            ctaDesc: 'Просмотрите наши предстоящие события и присоединитесь к сообществу соревновательных игроков.',
            viewEvents: 'ПРОСМОТРЕТЬ СОБЫТИЯ'
        },
        footer: {
            copyright: '© 2024 Таблица лидеров Warnament. Все права защищены.'
        }
    }
};

// Get current language from localStorage or default to 'en'
let currentLang = localStorage.getItem('language') || 'en';

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    setLanguage(currentLang);
    setupLanguageToggle();
});

// Setup language toggle button
function setupLanguageToggle() {
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.textContent = currentLang === 'en' ? 'RU' : 'EN';
        langToggle.addEventListener('click', () => {
            currentLang = currentLang === 'en' ? 'ru' : 'en';
            setLanguage(currentLang);
            langToggle.textContent = currentLang === 'en' ? 'RU' : 'EN';
            localStorage.setItem('language', currentLang);
        });
    }
}

// Set language for all elements with data-i18n attribute
function setLanguage(lang) {
    document.documentElement.lang = lang;
    
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        const keys = key.split('.');
        let translation = translations[lang];
        
        // Navigate through nested objects
        for (const k of keys) {
            translation = translation[k];
            if (!translation) break;
        }
        
        if (translation) {
            element.textContent = translation;
        }
    });
    
    // Reload events to update dynamic content
    if (typeof loadEvents === 'function') {
        loadEvents();
    }
}

// Export for use in other files
window.i18n = {
    t: (key) => {
        const keys = key.split('.');
        let translation = translations[currentLang];
        for (const k of keys) {
            translation = translation[k];
            if (!translation) return key;
        }
        return translation;
    },
    getCurrentLang: () => currentLang
};
